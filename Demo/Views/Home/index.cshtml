
@{
    ViewBag.Title = "index";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Director | Dashboard</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta name="description" content="Developed By M Abdur Rokib Promy">
    <meta name="keywords" content="Admin, Bootstrap 3, Template, Theme, Responsive">
    <!-- bootstrap 3.0.2 -->
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- font Awesome -->
    <link href="~/Content/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="~/Content/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Morris chart -->
    <link href="~/Content/morris/morris.css" rel="stylesheet" type="text/css" />
    <!-- jvectormap -->
    <link href="~/Content/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" />
    <!-- Date Picker -->
    <link href="~/Content/datepicker/datepicker3.css" rel="stylesheet" type="text/css" />
    <!-- fullCalendar -->
    <!-- <link href="css/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" /> -->
    <!-- Daterange picker -->
    <link href="~/Content/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" />
    <!-- iCheck for checkboxes and radio inputs -->
    <link href="~/Content/iCheck/all.css" rel="stylesheet" type="text/css" />
    <!-- bootstrap wysihtml5 - text editor -->
    <!-- <link href="css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" /> -->
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <!-- Theme style -->
    <link href="~/Content/style.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/dropdownList.css" rel="stylesheet" type="text/css" />


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->

    <style type="text/css">
    </style>
</head>
<body class="skin-black">
    <div class="navbar navbar-inverse navbar-fixed-top" style="background-color:#222">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                @Html.ActionLink("Application name", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
            </div>
            
        </div>
    </div>

    <div class="container body-content">
        @*@RenderBody()*@
        <hr />
        <footer></footer>
    </div>
    <!-- header logo: style can be found in header.less -->
    @*<header class="header">
        <a href="index.html" class="logo">
            Director
        </a>
        <!-- Header Navbar: style can be found in header.less -->
    </header>*@
    <div class="wrapper row-offcanvas row-offcanvas-left">
        <!-- Left side column. contains the logo and sidebar -->
        @*<aside class="left-side sidebar-offcanvas" style="height:80%;">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left image">
                        <img src="img/26115.jpg" class="img-circle" alt="User Image" />
                    </div>
                    <div class="pull-left info">
                        <p>Hello, Jane</p>

                        <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
                    </div>
                </div>
                <!-- search form -->
                <form action="#" method="get" class="sidebar-form">
                    <div class="input-group">
                        <input type="text" name="q" class="form-control" placeholder="Search..." />
                        <span class="input-group-btn">
                            <button type='submit' name='seach' id='search-btn' class="btn btn-flat"><i class="fa fa-search"></i></button>
                        </span>
                    </div>
                </form>
                <!-- /.search form -->
                <!-- sidebar menu: : style can be found in sidebar.less -->
                <ul class="sidebar-menu">
                    <li class="active">
                        <a href="index.html">
                            <i class="fa fa-dashboard"></i> <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="general.html">
                            <i class="fa fa-gavel"></i> <span>General</span>
                        </a>
                    </li>

                    <li>
                        <a href="basic_form.html">
                            <i class="fa fa-globe"></i> <span>Basic Elements</span>
                        </a>
                    </li>

                    <li>
                        <a href="simple.html">
                            <i class="fa fa-glass"></i> <span>Simple tables</span>
                        </a>
                    </li>

                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>*@

        <aside class="right-side" style="margin-left:0px">

            <!-- Main content -->
            <section class="content">
                <div class="row" style="margin-bottom:5px;">
                    <div class="col-md-3">
                        <div class="sm-st clearfix">
                            <span class="sm-st-icon st-red"><i class="fa fa-check-square-o"></i></span>
                            <div class="sm-st-info">
                                <span>344</span>
                                Total Food Categories
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="sm-st clearfix">
                            <span class="sm-st-icon st-violet"><i class="fa fa-envelope-o"></i></span>
                            <div class="sm-st-info">
                                <span>14</span>
                                Total Years
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="sm-st clearfix">
                            <span class="sm-st-icon st-blue"><i class="fa fa-dollar"></i></span>
                            <div class="sm-st-info">
                                <span>5</span>
                                Total Income Quintiles
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="sm-st clearfix">
                            <span class="sm-st-icon st-green"><i class="fa fa-paperclip"></i></span>
                            <div class="sm-st-info">
                                <span>2</span>
                                Total Datasets
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-bottom:20px">
                    <div>
                        <select id="select1" style="border-radius:5px;padding-left:5px;width:255px;height:30px;margin-left:14px;margin-top:12px;font-family: 'Lato', sans-serif;font-size:18px" onChange="changeSelect()">
                            <option value="0">All categories</option>
                            <option value="1">Alcoholic drinks</option>
                            <option value="2">Beverages</option>
                            <option value="3">Biscuits and crispbreads</option>
                            <option value="4">Bread</option>
                            <option value="5">Cakes, buns and pastries</option>
                            <option value="6">Carcase meat</option>
                            <option value="7">Cheese</option>
                            <option value="8">Confectionery</option>
                            <option value="9">Eggs</option>
                            <option value="10">Fats</option>
                            <option value="11">Fish</option>
                            <option value="12">Flour</option>
                            <option value="13">Fresh and processed vegetables</option>
                            @*<option value="13">Fresh and processed fruit</option>
                            <option value="14">Fresh and processed fruit and vegetables, excluding potatoes</option>
                            <option value="15">Fresh and processed fruit and vegetables, including potatoes</option>
                            <option value="16">Fresh and processed potatoes</option>
                            <option value="17">Fresh and processed vegetables, excluding potatoes</option>
                            <option value="18">Fresh and processed vegetables, including potatoes</option>*@
                            <option value="19">Milk and milk products excluding cheese</option>
                            <option value="20">Non-carcase meat and meat products</option>
                            <option value="21">Other cereals and cereal products</option>
                            <option value="22">Other food and drink</option>
                            <option value="23">Soft drinks</option>
                            <option value="24">Sugar and preserves</option>
                        </select>
                        <select id="select2" style="border-radius:5px;padding-left:5px;width:255px;height:30px;margin-left:30px;margin-top:12px;font-family: 'Lato', sans-serif;font-size:18px"></select>
                        <select id="select3" style="border-radius:5px;padding-left:5px;width:255px;height:30px;margin-left:28px;margin-top:12px;font-family: 'Lato', sans-serif;font-size:18px"></select>
                        <button name="submit" type="submit" id="changeChart" class="btn btn-primary btn-lg" style="font-size: 1.25rem;padding:.75rem 1.5rem;margin-left:28px">Submit</button>
                    </div>
                </div>@*padding-top:3px;border-radius:5px;width:150px;height:30px;margin-left:26px;margin-bottom:17px;padding-top:2px*@
                <!-- Main row -->
                <div class="row">
                    <div class="col-md-8" style="width:100%;height:100%;">
                        <!--earning graph start-->
                        <section class="panel">
                            <header class="panel-heading">
                                Elasticity
                            </header>
                            <div id="scatter" class="panel-body" style="width:1050px; height:500px">
                                @*<canvas id="linechart" width="1050" height="500" style="background-image:url(/Content/cap.jpg);background-size:1050px 500px"></canvas>*@
                            </div>
                        </section>
                        <!--earning graph end-->
                    </div>
                </div>        
            </section><!-- /.content -->
            <div class="footer-main">
                Copyright &copy Director, 2014
            </div>
        </aside><!-- /.right-side -->
   </div>
    <!-- jQuery 2.0.2 -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
    <script src="~/Scripts/jquery.min.js" type="text/javascript"></script>

    <!-- jQuery UI 1.10.3 -->
    <script src="~/Scripts/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
    <!-- Bootstrap -->
    <script src="~/Scripts/bootstrap.min.js" type="text/javascript"></script>
    <!-- daterangepicker -->
    <script src="~/Scripts/plugins/daterangepicker/daterangepicker.js" type="text/javascript"></script>

    <script src="~/Scripts/plugins/chart.js" type="text/javascript"></script>

    <!-- datepicker
    <script src="js/plugins/datepicker/bootstrap-datepicker.js" type="text/javascript"></script>-->
    <!-- Bootstrap WYSIHTML5
    <script src="js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" type="text/javascript"></script>-->
    <!-- iCheck -->
    <script src="~/Scripts/plugins/iCheck/icheck.min.js" type="text/javascript"></script>
    <!-- calendar -->
    <script src="~/Scripts/plugins/fullcalendar/fullcalendar.js" type="text/javascript"></script>

    <!-- Director dashboard demo (This is only for demo purposes) -->
    @*<script src="~/Scripts/Director/dashboard.js" type="text/javascript"></script>*@

    <script src="~/Scripts/myJs.js" type="text/javascript"></script>

    <script src="https://d3js.org/d3.v3.min.js"></script>

    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <!-- Director for demo purposes -->
    @*<script type="text/javascript">
            $('input').on('ifChecked', function(event) {
                // var element = $(this).parent().find('input:checkbox:first');
                // element.parent().parent().parent().addClass('highlight');
                $(this).parents('li').addClass("task-done");
                console.log('ok');
            });
            $('input').on('ifUnchecked', function(event) {
                // var element = $(this).parent().find('input:checkbox:first');
                // element.parent().parent().parent().removeClass('highlight');
                $(this).parents('li').removeClass("task-done");
                console.log('not');
            });

    </script>
    <script>
            $('#noti-box').slimScroll({
                height: '400px',
                size: '5px',
                BorderRadius: '5px'
            });

            $('input[type="checkbox"].flat-grey, input[type="radio"].flat-grey').iCheck({
                checkboxClass: 'icheckbox_flat-grey',
                radioClass: 'iradio_flat-grey'
            });
    </script>*@
    <script>
        $("#changeChart").click(function () {
            var select1 = document.getElementById('select1').value;
            var select2 = document.getElementById('select2').value;
            var select3 = document.getElementById('select3').value;
            data = JSON.stringify({ t1: select1, t2: select2, t3: select3 });

            $.ajax({
                type: "post",
                dataType: "json",
                url: "/Home/charts",
                data: data,
                conteneType:"application/json",
                success: function (da) {
                    var margin = { top: 20, right: 170, bottom: 30, left: 40 },
                width = 1000 - margin.left - margin.right,
                height = 500 - margin.top - margin.bottom;

                    var x = d3.scale.ordinal()
                        .rangeRoundBands([0, width], 1)

                    var y = d3.scale.linear()
                        .range([height, 0]);

                    var color = d3.scale.category10();

                    var xAxis = d3.svg.axis()
                        .scale(x)
                        .orient("bottom");
                    var yAxis = d3.svg.axis()
                        .scale(y)
                        .orient("left");
                    var xCat = "quintile";
                    var colorCat = "category";

                    var svg = d3.select("#scatter").append("svg")
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                      .append("g")
                        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                    var line1 = svg.append("line")
                            .attr("x1", 0)
                            .attr("x2", width)
                            .attr("y1", height - 100)
                            .attr("y2", height - 100)
                            .attr("stroke-width", 1)
                            .attr("stroke", "black")
                    var line1 = svg.append("line")
                            .attr("x1", 0)
                            .attr("x2", width)
                            .attr("y1", height - 300)
                            .attr("y2", height - 300)
                            .attr("stroke-width", 1)
                            .attr("stroke", "black")
                    var text1 = svg.append("text")
                          .attr("class", "label")
                          .attr("x", width)
                          .attr("y", height - 120)
                          .style("text-anchor", "end")
                          .style("font-size", "20px")
                          .text("Inelastic");
                    var text1 = svg.append("text")
                          .attr("class", "label")
                          .attr("x", width)
                          .attr("y", height - 320)
                          .style("text-anchor", "end")
                          .style("font-size", "20px")
                          .text("Elastic");
                    alert(da);
                    var data = JSON.parse(da);
                    data.forEach(function (d) {
                        d.category = +d.category;
                        d.elasticity = +d.elasticity;
                        d.quintile = +d.quintile;
                        d.number = +d.number
                    });
                    x.domain(data.map(function (d) { return d[xCat]; }));
                    y.domain(d3.extent(data, function (d) { return d.elasticity; })).nice();

                    var fade = function (opacity) {
                        return function (g, i) {
                            svg.selectAll(".dot")
                                .filter(function (d) {
                                    return d.number % 10 != (i + 1) % 10;

                                })
                                .transition()
                                .style("opacity", opacity)
                            ;
                        };
                    };

                    svg.append("g")
                        .attr("class", "x axis")
                        .attr("transform", "translate(0," + height + ")")
                        .call(xAxis)
                        .append("text")
                        .attr("class", "label")
                        .attr("x", width)
                        .attr("y", -6)
                        .style("text-anchor", "end")
                        .style("font-size", "12px")
                        .text("Income Quintile");

                    svg.append("g")
                        .attr("class", "y axis")
                        .call(yAxis)
                        .append("text")
                        .attr("class", "label")
                        .attr("transform", "rotate(-90)")
                        .attr("y", 6)
                        .attr("dy", ".71em")
                        .style("text-anchor", "end")
                        .style("font-size", "12px")
                        .text("Price Elasticity")
                    
                    var tip = d3.tip()
                                .attr("class", "d3-tip")
                                .offset([-10, 0])
                                .html(function (d) {
                                    return "Elasticity" + ": " + d.elasticity;
                                });
                    svg.call(tip);

                    var objects = svg.append("svg")
                                .classed("objects", true)
                                .attr("width", width)
                                .attr("height", height);

                    objects.selectAll(".dot")
                        .data(data)
                        .enter().append("circle")
                        .attr("class", "dot")
                        .attr("r", 8)
                        .attr("transform", function (d) { return "translate(" + x(d[xCat]) + "," + y(d.elasticity) + ")"; })
                        .style("fill", function (d) { return color(d[colorCat]); })
                            .on("mousedown", tip.show)
                            .on("mouseup", tip.hide)
                            .on("mouseover", fade(0.1))
                            .on("mouseout", fade(1))
                    ;

                    var legend = svg.selectAll(".legend")
                        .data(color.domain())
                        .enter().append("g")
                        .attr("class", "leg")
                        .attr("transform", function (d, i) { return "translate(0," + i * 20 + ")"; });

                    legend.append("rect")
                        .attr("class", "rect")
                        .attr("x", width + margin.right - 40)
                        .attr("width", 18)
                        .attr("height", 18)
                        .style("fill", color);

                    legend.append("text")
                        .attr("class", "text")
                        .attr("x", width + margin.right - 50)
                        .attr("y", 9)
                        .attr("dy", ".35em")
                        .style("text-anchor", "end")
                        .text(function (d) { return "Category " + d; });

                    //d3.select("input").on("click", change);
                    //d3.select("#Quintile").on("click", change2);

                    function change() {

                        x.domain(data.map(function (d) { return d.category; }));

                        var svg = d3.select("#scatter").transition();

                        svg.select(".x.axis").duration(750).call(xAxis).select(".label").text("Category");

                        objects.selectAll(".dot").transition()
                            .duration(1000)
                            .attr("transform", function (d) { return "translate(" + x(d.category) + "," + y(d.elasticity) + ")"; })
                            .style("fill", function (d) { return color(d.quintile); });

                        var legend = svg.selectAll(".leg").transition();
                        var rect = svg.selectAll(".rect").transition().style("fill", color);
                        var text = svg.selectAll(".text").transition().attr("dy", ".35em").text(function (d) { return "Quintile " + d; });;

                    }
                    function change2() {

                        x.domain(data.map(function (d) { return d.quintile; }));

                        var svg = d3.select("#scatter").transition();

                        svg.select(".x.axis").duration(750).call(xAxis).select(".label").text("Quintile");

                        objects.selectAll(".dot").transition()
                            .duration(1000)
                            .attr("transform", function (d) { return "translate(" + x(d.quintile) + "," + y(d.elasticity) + ")"; })
                            .style("fill", function (d) { return color(d.category); });

                        var legend = svg.selectAll(".leg").transition();
                        var rect = svg.selectAll(".rect").transition().style("fill", color);
                        var text = svg.selectAll(".text").transition().attr("dy", ".35em").text(function (d) { return "Category " + d; });;

                    };
                },
                error: function(){
                    alert("error")
                }
            })
        });



    </script>
</body>
</html>

